<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image-Filled Stacked Flipbook</title>
    <style>
        :root {
            --book-width: 545px;
            --book-height: 400px;
            --flip-speed: 0.9s;
            --spine-shadow: linear-gradient(to right, rgba(0,0,0,0.2), transparent);
        }

        body {
            margin: 0; height: 100vh;
            display: flex; justify-content: center; align-items: center;
            background: #dcdcdc; font-family: sans-serif; overflow: hidden;
            cursor: pointer;
        }

        .viewport { perspective: 1800px; display: flex; justify-content: center; width: 100%; }

        .book {
            position: relative;
            width: var(--book-width);
            height: var(--book-height);
            transform-style: preserve-3d;
            transition: transform var(--flip-speed) ease-in-out;
        }

        @media (min-width: 768px) {
            .book.opened { transform: translateX(50%); }
        }

        @media (max-width: 767px) {
            .book {transform: translateX(50px); }
        }

        .page {
            position: absolute;
            width: 100%; height: 100%;
            top: 0; left: 0;
            transform-origin: left;
            transform-style: preserve-3d;
            transition: transform var(--flip-speed) ease-in-out;
            pointer-events: none;
        }

        .front, .back {
            position: absolute;
            width: 100%; height: 100%;
            backface-visibility: hidden;
            background: white;
            border: 1px solid #aaa;
            overflow: hidden; /* Clips image to page bounds */
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
        }

        .front img{
            object-position: left;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Maintains ratio, fills space */
            display: block;
        }

        .back img{
            object-position: right;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Maintains ratio, fills space */
            display: block;
        }

        .back { transform: rotateY(180deg); }

        /* Smooth Spine shadow */
        .page::after {
            content: ''; position: absolute;
            top: 0; left: 0; width: 100px; height: 100%;
            background: var(--spine-shadow);
            opacity: 0; transition: opacity var(--flip-speed);
            z-index: 10; pointer-events: none;
        }

        .flipped::after { opacity: 1; }
        .flipped { transform: rotateY(-180deg); }

    </style>
</head>
<body>

<div class="viewport">
    <div class="book" id="book">
        <!-- Replace URLs with your actual image paths -->
        <div class="page">
            <div class="front"><img src="images/ny1.jpg" alt="Cover"></div>
            <div class="back"><img src="images/ny1.jpg" alt="Page 1"></div>
        </div>
        <div class="page">
            <div class="front"><img src="images/ny2.jpg" alt="Page 2"></div>
            <div class="back"><img src="images/chi1.jpg" alt="Page 3"></div>
        </div>
        <div class="page">
            <div class="front"><img src="images/chi2.jpg" alt="Page 4"></div>
            <div class="back"><img src="images/hou1.jpg" alt="Page 5"></div>
        </div>
        <div class="page">
            <div class="front"><img src="images/hou2.jpg" alt="Page 6"></div>
            <div class="back"><img src="images/hou1.jpg" alt="Back Cover"></div>
        </div>
    </div>
</div>

<script>
    const book = document.getElementById('book');
    const pages = document.querySelectorAll('.page');
    let currentIdx = 0;

    function updateState() {
        pages.forEach((page, index) => {
            if (index < currentIdx) {
                page.classList.add('flipped');
                page.style.transform = `rotateY(-180deg) translateX(0px)`;
                page.style.zIndex = 10 + index;
            } else {
                page.classList.remove('flipped');
                // Stacked offset on the right
                const offset = (index - currentIdx) * 3;
                page.style.transform = `rotateY(0deg) translateX(${offset}px)`;
                page.style.zIndex = pages.length - index;
            }
        });
        currentIdx > 0 ? book.classList.add('opened') : book.classList.remove('opened');
    }

    document.addEventListener('click', (e) => {
        if (e.clientX < window.innerWidth / 2) goPrev();
        else goNext();
    });

    function goNext() { if (currentIdx < pages.length) { currentIdx++; updateState(); } }
    function goPrev() { if (currentIdx > 0) { currentIdx--; updateState(); } }

    updateState();
</script>
</body>
</html>
